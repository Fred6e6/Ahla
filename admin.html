<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø© | Ahla</title>
<script src="js/roleGuard.js"></script>
<style>
body{font-family:Tahoma;background:#f2f2f2;padding:20px}
nav{background:#222;padding:10px;margin-bottom:15px;display:flex;gap:8px;flex-wrap:wrap}
nav button{background:#6c757d;color:#fff;border:none;padding:7px 12px;border-radius:6px;cursor:pointer}
nav .logout{background:#dc3545}
table{width:100%;background:#fff;border-collapse:collapse}
th,td{border:1px solid #ddd;padding:8px;text-align:center}
th{background:#343a40;color:#fff}
img{width:64px;margin:4px;border:1px solid #ccc;border-radius:6px}
hr{margin:14px 0}
</style>
</head>
<body>

<nav>
  <button type="button" onclick="navGo('admin.html')">ğŸ“¥ Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©</button>
  <button type="button" onclick="navGo('sent.html')">ğŸ“¤ Ø§Ù„Ù…Ø±Ø³Ù„Ø©</button>
  <button type="button" onclick="navBack()">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
  <button type="button" class="logout" onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</button>
</nav>

<script>
if (localStorage.getItem("role") !== "admin") {
  alert("ØºÙŠØ± Ù…ØµØ±Ø­");
  location.href = "index.html";
}
function basePath(){ const p=location.pathname; return p.substring(0,p.lastIndexOf('/')+1); }
function navGo(page){ location.href = location.origin + basePath() + page; }
function navBack(){
  if(history.length>1) history.back();
  else navGo("admin.html");
}
</script>

<h2>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>
<div id="all"></div>

<script>
const batches = JSON.parse(localStorage.getItem("ahla_batches")) || [];
let h = "";

batches.forEach((b, i) => {
  h += `<h3>Ø¯ÙØ¹Ø© ${i+1} â€” Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${b.user} â€” ${b.date}</h3>`;
  h += `<table><tr><th>#</th><th>Ø±Ù‚Ù… Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th></tr>`;
  b.items.forEach((it, idx) => {
    h += `<tr><td>${idx+1}</td><td>${it.code}</td><td>${it.qty}</td><td>${it.price}</td><td>${it.total}</td></tr>`;
  });
  h += `</table><div>`;
  (b.images||[]).forEach(img => h += `<img src="${img}">`);
  h += `</div><hr>`;
});

all.innerHTML = h || "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª";
</script>

<script src="js/auth.js"></script>
</body>
</html>
